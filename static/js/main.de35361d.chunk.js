(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),s=a.n(o),c=a(53),i=a(52),l=a(11),u=a(12),p=a(14),m=a(13),d=a(50),h=a.n(d),f=a(63),g=a(51),y=a.n(g),v=(a(77),a(60),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).clickItem=function(){e.props.onClickItem(e.props.item)},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"item",onClick:this.clickItem},this.props.item.display_name)}}]),a}(r.a.Component)),k=a(129),S=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).clickItem=function(t){e.props.onClickItem(t)},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e,t=this;return r.a.createElement(k.a,{className:"listBox"},null===(e=this.props.result)||void 0===e?void 0:e.map((function(e,a){return r.a.createElement(v,{key:a,item:e,onClickItem:t.clickItem})})))}}]),a}(r.a.Component),C=a(67),b=a.n(C),j=a(127),O=a(68),w=a.n(O),D=a(128),E=(a(81),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeSearch=function(e){n.setState({newSearch:"".concat(e.target.value)})},n.onKeyPressSearch=function(e){"Enter"===e.key&&(n.getData(),n.getMapQuestData())},n.onClick=function(){n.getData(),n.getMapQuestData()},n.state={resultString:"Pusto",result:[],mapQuestResult:{results:[{locations:[]}]},onGetData:function(){},onGetMapQuestData:function(){},searchOnProgres:!1,onClickItem:function(){}},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.result!==this.state.result&&this.props.onGetData(this.state.result),t.mapQuestResult!==this.state.mapQuestResult&&this.props.onGetMapQuestData(this.state.mapQuestResult)}},{key:"onClickItemChanged",value:function(e){console.log("test",e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"mainSerachBox"},this.state.searchOnProgres?r.a.createElement(D.a,null):"",r.a.createElement("div",{className:"searchBox"},r.a.createElement(b.a,{className:"searchBoxInput",onChange:this.onChangeSearch,value:this.props.newSearch,onKeyPress:this.onKeyPressSearch,placeholder:"Wyszukaj",inputProps:{"aria-label":"search"}}),r.a.createElement(j.a,{type:"submit",onClick:this.onClick,className:"iconButton","aria-label":"search"},r.a.createElement(w.a,null))),r.a.createElement(S,{result:this.state.result,resultMapQuest:this.state.mapQuestResult,onClickItem:this.props.onClickItem})))}},{key:"getData",value:function(){var e=this;this.setState({searchOnProgres:!0});var t="https://nominatim.openstreetmap.org/?addressdetails=1&q=".concat(this.state.newSearch,"&format=json&limit=100");fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({resultString:JSON.stringify(t)}),e.setState({result:t}),e.setState({searchOnProgres:!1})})).catch((function(t){console.error("Error:",t),e.setState({resultString:JSON.stringify([])}),e.setState({result:[]}),e.setState({searchOnProgres:!1})}))}},{key:"getMapQuestData",value:function(){}}]),a}(r.a.Component));y.a.accessToken="pk.eyJ1IjoidGxvbWllaiIsImEiOiJja2cyNm4wY2YwZ2ZkMnlvNWFjdTB3ZWV2In0.Bo-nyJTaJwxOpgDFwIH_9g";var F=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).mapContainer=void 0,n.map=void 0,n.marker=void 0,n.getDataFromMapQuest=function(e){console.log("getDataFromMapQuest =>",e);var t=e.results[0].locations.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.latLng.lng),parseFloat(e.latLng.lat)]}}})),a={type:"FeatureCollection",features:[]};a.features=t,n.map.getSource("mapQuestLayer")||(n.map.addSource("mapQuestLayer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"mapQuestLayerId",source:"mapQuestLayer",type:"circle",paint:{"circle-radius":10,"circle-color":"blue"}})),n.map.getSource("mapQuestLayer").setData(a)},n.getDataFromSearch=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getDataFromSearch =>",t),a=t.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}})),console.log("GEoJson",a),n.setState({points:a}),(r={type:"FeatureCollection",features:[]}).features=a,n.map.getSource("point")||(n.map.addSource("point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.map.addLayer({id:"points",source:"point",type:"circle",paint:{"circle-radius":20,"circle-color":"red"}})),n.map.getSource("point").setData(r),e.next=10,n.map.flyTo({center:a[0].geometry.coordinates,essential:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.rotateCamera=function(e){n.map.rotateTo(e/150%360,{duration:0}),requestAnimationFrame(n.rotateCamera)},n.onClikItem=function(e){console.log("TEST MAP",e),n.map.flyTo({center:[Number(e.lon),Number(e.lat)],essential:!0})},n.state={lng:5,lat:34,zoom:0,points:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.map=new y.a.Map({container:this.mapContainer,center:[this.props.longitude,this.props.latitude],style:"mapbox://styles/mapbox/streets-v11",zoom:21,pitch:45}),this.map.on("load",(function(){e.map.addSource("point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.map.addLayer({id:"points",source:"point",type:"circle",paint:{"circle-radius":20,"circle-color":"red"}})})),this.map.on("move",(function(){e.setState({lng:e.map.getCenter().lng.toFixed(4),lat:e.map.getCenter().lat.toFixed(4),zoom:e.map.getZoom().toFixed(2)})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"searchStyle"},r.a.createElement(E,{onGetMapQuestData:this.getDataFromMapQuest,onGetData:this.getDataFromSearch,onClickItem:this.onClikItem})),r.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"}))}}]),a}(r.a.Component),I=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newSearch:"",geoNames:"",newTask:{id:1,name:""},tasks:[{name:"test4",id:12},{name:"test5",id:15},{name:"test6",id:16},{name:"test7",id:17}]},e.textParam="Administrator",e.deleteTask=function(t){console.log("App.tsx -> ".concat(t.id)),e.setState({tasks:Object(i.a)(e.state.tasks.filter((function(e){return e.id!==t.id})))})},e.addTask=function(t){t.preventDefault(),console.log("Dodaj"),e.setState((function(e){return{newTask:{id:e.newTask.id+1,name:""},tasks:[].concat(Object(i.a)(e.tasks),[e.newTask])}}))},e.onChangeTask=function(t){console.log(t.target.value),e.setState({newTask:Object(c.a)(Object(c.a)({},e.state.newTask),{},{name:t.target.value})})},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(F,{longitude:17,latitude:52})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){},71:function(e,t,a){e.exports=a(112)},77:function(e,t,a){},81:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.de35361d.chunk.js.map